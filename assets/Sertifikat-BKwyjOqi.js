import{j as e}from"./animation-core-BZFp2DKZ.js";import{a as r}from"./react-core-BbmA5Yt5.js";import{b as t}from"./utils-CUgZd7Ef.js";import{L as a}from"./index-sXisbsum.js";import{A as l,P as s}from"./index-DiFEj8Rz.js";import"./utils-db-I9L1Vnn6.js";import"./react-dom-Ceep4mT8.js";import"./react-router-BF67XFk8.js";const o=()=>{const[o,i]=r.useState([]),[n,c]=r.useState(!0),[d,m]=r.useState(null),[x,p]=r.useState("all"),[u,h]=r.useState(1),[g,b]=r.useState(null),[y,f]=r.useState(!1);r.useState(null),r.useState(null),r.useEffect((()=>{(async()=>{try{const{data:e,error:r}=await t.from("sertifikat").select("*").order("periode_terbit",{ascending:!1});if(r)throw r;i(e)}catch(e){m(e.message)}finally{c(!1)}})()}),[]);const j=["all",...new Set(o.filter((e=>e.tipe)).map((e=>e.tipe)))],v="all"===x?o:o.filter((e=>e.tipe===x)),N=Math.ceil(v.length/9);return r.useEffect((()=>(y?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")})),[y]),n?e.jsx(a,{}):d?e.jsxs("div",{children:["Error: ",d]}):e.jsxs("div",{className:"sertifikat-container",children:[e.jsx("div",{className:"content-wrapper style={{ borderColor: 'var(--color-primary)', borderWidth: '1px' }}>",children:e.jsxs("div",{className:"mx-auto max-w-7xl relative pb-8 md:pb-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-center mb-8 text-gray-900",children:"Sertifikat"}),e.jsx("div",{className:"filter-container sticky top-[80px] flex flex-wrap justify-center gap-2 mb-8",children:j.map((r=>e.jsx("button",{onClick:()=>p(r),className:"\n                  px-3 py-1 rounded-full text-sm font-medium \n                  transition-all duration-300 \n                  "+(x===r?"text-white":"text-[var(--color-primary)] border border-[var(--color-primary)]"),style:{backgroundColor:x===r?"var(--color-primary)":"white"},children:"all"===r?"Semua":r},r)))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-8",children:(()=>{const e=9*u,r=e-9;return v.slice(r,e)})().map((r=>e.jsx("div",{className:"sertifikat-card bg-white/70 backdrop-blur-sm rounded-lg shadow-md overflow-hidden",style:{borderColor:"var(--color-primary)",borderWidth:"1px"},children:e.jsxs("div",{className:"p-4 md:p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 flex-1 line-clamp-2",children:r.judul}),r.tipe&&e.jsx("span",{style:(r.tipe,{backgroundColor:"white",color:"var(--color-primary)",border:"1px solid var(--color-primary)",padding:"2px 8px",borderRadius:"999px",fontSize:"0.75rem",fontWeight:"400"}),className:"shrink-0 mt-1",children:r.tipe})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx("p",{className:"text-gray-600",children:r.penerbit}),e.jsx("span",{className:"text-sm text-gray-500 sm:before:content-['•'] sm:before:mx-2 sm:before:text-gray-400",children:new Date(r.periode_terbit).toLocaleDateString("id-ID",{year:"numeric",month:"long"})})]}),r.keterangan&&e.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:r.keterangan}),e.jsxs("div",{className:"flex justify-end items-center mt-auto gap-2",children:[r.url&&e.jsxs("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 text-sm rounded-full transition-colors duration-300",style:{color:"var(--color-primary)",borderColor:"var(--color-primary)",borderWidth:"1px",backgroundColor:"white"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--color-primary)",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.color="var(--color-primary)"},children:[e.jsx(l,{className:"w-4 h-4"}),"Lihat Sertifikat"]}),e.jsx("button",{onClick:()=>(e=>{b(e),f(!0),document.body.style.overflow="hidden"})(r),className:"px-3 py-1 text-sm rounded-full transition-colors duration-300",style:{color:"var(--color-primary)",borderColor:"var(--color-primary)",borderWidth:"1px",backgroundColor:"white"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--color-primary)",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.color="var(--color-primary)"},children:"Detail"})]})]})},r.id)))}),N>1&&e.jsx("div",{className:"mb-1",children:e.jsx(s,{currentPage:u,totalCount:v.length,pageSize:9,onPageChange:h})})]})}),y&&g&&e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black/50 z-[100]",children:e.jsxs("div",{className:"modal-content relative bg-white rounded-lg shadow-lg z-[101] max-w-2xl mx-auto mt-20 md:mt-24",style:{borderColor:"var(--color-primary)",borderWidth:"1px"},onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full my-2"})}),e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:g.judul}),e.jsx("button",{onClick:()=>{f(!1),b(null),document.body.style.overflow="auto"},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Periode Terbit"}),e.jsx("p",{className:"text-gray-600",children:new Date(g.periode_terbit).toLocaleDateString("id-ID",{year:"numeric",month:"long"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Penerbit"}),e.jsx("p",{className:"text-gray-600",children:g.penerbit})]}),g.keterangan&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keterangan"}),e.jsx("p",{className:"text-gray-600 text-justify",children:g.keterangan.includes("https://")?e.jsxs(e.Fragment,{children:[g.keterangan.replace(/(https?:\/\/[^\s]+)/g,""),e.jsx("a",{href:g.keterangan.match(/(https?:\/\/[^\s]+)/g)?.[0],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline cursor-pointer ml-1",onClick:e=>e.stopPropagation(),children:"[lihat disini]"})]}):g.keterangan})]}),g.url&&e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-2 rounded-md transition-colors duration-200 gap-2",style:{backgroundColor:"var(--color-primary)",color:"white"},onMouseOver:e=>{e.currentTarget.style.opacity="0.9"},onMouseOut:e=>{e.currentTarget.style.opacity="1"},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25z"})}),"Lihat Sertifikat"]})})]})})]})})]})};export{o as default};