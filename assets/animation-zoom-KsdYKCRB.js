import{R as n,a as t}from"./react-core-BbmA5Yt5.js";var e=function(n,t){return Number(n.toFixed(t))},i=function(n,t,e){e&&"function"==typeof e&&e(n,t)},o={easeOut:function(n){return-Math.cos(n*Math.PI)/2+.5},linear:function(n){return n},easeInQuad:function(n){return n*n},easeOutQuad:function(n){return n*(2-n)},easeInOutQuad:function(n){return n<.5?2*n*n:(4-2*n)*n-1},easeInCubic:function(n){return n*n*n},easeOutCubic:function(n){return--n*n*n+1},easeInOutCubic:function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},easeInQuart:function(n){return n*n*n*n},easeOutQuart:function(n){return 1- --n*n*n*n},easeInOutQuart:function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},easeInQuint:function(n){return n*n*n*n*n},easeOutQuint:function(n){return 1+--n*n*n*n*n},easeInOutQuint:function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n}},a=function(n){"number"==typeof n&&cancelAnimationFrame(n)},r=function(n){n.mounted&&(a(n.animation),n.animate=!1,n.animation=null,n.velocity=null)};function s(n,t,e,i){if(n.mounted){var s=(new Date).getTime();r(n),n.animation=function(){if(!n.mounted)return a(n.animation);var r=(new Date).getTime()-s,l=(0,o[t])(r/e);r>=e?(i(1),n.animation=null):n.animation&&(i(l),requestAnimationFrame(n.animation))},requestAnimationFrame(n.animation)}}function l(n,t,e,i){var o=function(n){var t=n.scale,e=n.positionX,i=n.positionY;return!(Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(i))}(t);if(n.mounted&&o){var a=n.setTransformState,r=n.transformState,l=r.scale,u=r.positionX,c=r.positionY,p=t.scale-l,m=t.positionX-u,f=t.positionY-c;0===e?a(t.scale,t.positionX,t.positionY):s(n,i,e,(function(n){a(l+p*n,u+m*n,c+f*n)}))}}var u=function(n,t){var e=n.wrapperComponent,i=n.contentComponent,o=n.setup.centerZoomedOut;if(!e||!i)throw new Error("Components are not mounted");var a=function(n,t,e){var i=n.offsetWidth,o=n.offsetHeight,a=t.offsetWidth*e,r=t.offsetHeight*e;return{wrapperWidth:i,wrapperHeight:o,newContentWidth:a,newDiffWidth:i-a,newContentHeight:r,newDiffHeight:o-r}}(e,i,t),r=a.wrapperWidth,s=a.wrapperHeight,l=function(n,t,e,i,o,a,r){var s=n>t?e*(r?1:.5):0,l=i>o?a*(r?1:.5):0;return{minPositionX:n-t-s,maxPositionX:s,minPositionY:i-o-l,maxPositionY:l}}(r,a.newContentWidth,a.newDiffWidth,s,a.newContentHeight,a.newDiffHeight,Boolean(o));return l},c=function(n,t,i,o){return e(o?n<t?t:n>i?i:n:n,2)},p=function(n,t){var e=u(n,t);return n.bounds=e,e};function m(n,t,e,i,o,a,r){var s=e.minPositionX,l=e.minPositionY,u=e.maxPositionX,p=e.maxPositionY,m=0,f=0;return r&&(m=o,f=a),{x:c(n,s-m,u+m,i),y:c(t,l-f,p+f,i)}}function f(n,t,e,i,o,a){var r=n.transformState,s=r.scale,l=r.positionX,u=r.positionY,c=i-s;return"number"!=typeof t||"number"!=typeof e?{x:l,y:u}:m(l-t*c,u-e*c,o,a,0,0,null)}function d(n,t,e,i,o){var a=t-(o?i:0);return!Number.isNaN(e)&&n>=e?e:!Number.isNaN(t)&&n<=a?a:n}var v=function(n,t){var e=n.setup.panning.excluded,i=n.isInitialized,o=n.wrapperComponent,a=t.target,r="shadowRoot"in a&&"composedPath"in t?t.composedPath().some((function(n){return n instanceof Element&&(null==o?void 0:o.contains(n))})):null==o?void 0:o.contains(a);return!!(i&&a&&r)&&!_(a,e)},h=function(n){var t=n.isInitialized,e=n.isPanning,i=n.setup.panning.disabled;return!(!t||!e||i)};function g(n,t,e,i,o){var a=n.setup.limitToBounds,r=n.wrapperComponent,s=n.bounds,l=n.transformState,u=l.scale,c=l.positionX,p=l.positionY;if(null!==r&&null!==s&&(t!==c||e!==p)){var f=m(t,e,s,a,i,o,r),d=f.x,v=f.y;n.setTransformState(u,d,v)}}var S=function(n,t){var e=n.setup,i=n.transformState.scale,o=e.minScale,a=e.disablePadding;return t>0&&i>=o&&!a?t:0};function y(n,t,e,i,o,a,r,s,l,u){if(o){var p;if(t>r&&e>r)return(p=r+(n-r)*u)>l?l:p<r?r:p;if(t<a&&e<a)return(p=a+(n-a)*u)<s?s:p>a?a:p}return i?t:c(n,a,r,o)}function w(n,t){var e=n.transformState.scale;r(n),p(n,e),void 0!==window.TouchEvent&&t instanceof TouchEvent?function(n,t){var e=t.touches,i=n.transformState,o=i.positionX,a=i.positionY;if(n.isPanning=!0,1===e.length){var r=e[0].clientX,s=e[0].clientY;n.startCoords={x:r-o,y:s-a}}}(n,t):function(n,t){var e=n.transformState,i=e.positionX,o=e.positionY;n.isPanning=!0;var a=t.clientX,r=t.clientY;n.startCoords={x:a-i,y:r-o}}(n,t)}function b(n){var t=n.transformState.scale,e=n.setup,i=e.minScale,o=e.alignmentAnimation,a=o.disabled,r=o.sizeX,s=o.sizeY,u=o.animationTime,c=o.animationType;if(!(a||t<i||!r&&!s)){var p=function(n){var t=n.transformState,e=t.positionX,i=t.positionY,o=t.scale,a=n.setup,r=a.disabled,s=a.limitToBounds,l=a.centerZoomedOut,u=n.wrapperComponent;if(!r&&u&&n.bounds){var c=n.bounds,p=c.maxPositionX,m=c.minPositionX,d=c.maxPositionY,v=c.minPositionY,h=e>p||e<m,g=i>d||i<v,S=f(n,e>p?u.offsetWidth:n.setup.minPositionX||0,i>d?u.offsetHeight:n.setup.minPositionY||0,o,n.bounds,s||l),y=S.x,w=S.y;return{scale:o,positionX:h?y:e,positionY:g?w:i}}}(n);p&&l(n,p,u,c)}}function C(n,t,e){var i=n.startCoords,o=n.setup.alignmentAnimation,a=o.sizeX,r=o.sizeY;if(i){var s=function(n,t,e){var i=n.startCoords,o=n.transformState,a=n.setup.panning,r=a.lockAxisX,s=a.lockAxisY,l=o.positionX,u=o.positionY;if(!i)return{x:l,y:u};var c=t-i.x,p=e-i.y;return{x:r?l:c,y:s?u:p}}(n,t,e),l=s.x,u=s.y,c=S(n,a),p=S(n,r);(function(n,t){var e=function(n){var t=n.mounted,e=n.setup,i=e.disabled,o=e.velocityAnimation,a=n.transformState.scale;return!(o.disabled&&!(a>1)&&i&&!t)}(n);if(e){var i=n.lastMousePosition,o=n.velocityTime,a=n.setup,r=n.wrapperComponent,s=a.velocityAnimation.equalToMove,l=Date.now();if(i&&o&&r){var u=function(n,t){return t?Math.min(1,n.offsetWidth/window.innerWidth):1}(r,s),c=t.x-i.x,p=t.y-i.y,m=c/u,f=p/u,d=l-o,v=c*c+p*p,h=Math.sqrt(v)/d;n.velocity={velocityX:m,velocityY:f,total:h}}n.lastMousePosition=t,n.velocityTime=l}})(n,{x:l,y:u}),g(n,l,u,c,p)}}function P(n,t,i,o){var a=n.setup,r=a.minScale,s=a.maxScale,l=a.limitToBounds,u=d(e(t,2),r,s,0,!1),c=f(n,i,o,u,p(n,u),l);return{scale:u,positionX:c.x,positionY:c.y}}function T(n,t,e){var i=n.transformState.scale,o=n.wrapperComponent,a=n.setup,r=a.minScale,s=a.limitToBounds,u=a.zoomAnimation,c=u.disabled,p=u.animationTime,m=u.animationType,f=c||i>=r;if((i>=1||s)&&b(n),!f&&o&&n.mounted){var d=P(n,r,t||o.offsetWidth/2,e||o.offsetHeight/2);d&&l(n,d,p,m)}}var x=function(){return x=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++)for(var o in t=arguments[e])Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},x.apply(this,arguments)};function Y(n,t,e){for(var i,o=0,a=t.length;o<a;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return n.concat(i||Array.prototype.slice.call(t))}var X={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},E="react-transform-wrapper",z=function(n){var t,e,i,o;return{previousScale:null!==(t=n.initialScale)&&void 0!==t?t:1,scale:null!==(e=n.initialScale)&&void 0!==e?e:1,positionX:null!==(i=n.initialPositionX)&&void 0!==i?i:0,positionY:null!==(o=n.initialPositionY)&&void 0!==o?o:0}},k=function(n){var t=x({},X);return Object.keys(n).forEach((function(e){var i=void 0!==n[e];if(void 0!==X[e]&&i){var o=Object.prototype.toString.call(X[e]),a="[object Object]"===o,r="[object Array]"===o;t[e]=a?x(x({},X[e]),n[e]):r?Y(Y([],X[e]),n[e]):n[e]}})),t},N=function(n,t,i){var o=n.transformState.scale,a=n.wrapperComponent,r=n.setup,s=r.maxScale,l=r.minScale,u=r.zoomAnimation,c=r.smooth,p=u.size;if(!a)throw new Error("Wrapper is not mounted");var m=c?o*Math.exp(t*i):o+t*i;return d(e(m,3),l,s,p,!1)};function W(n,t,e,i,o){var a=n.wrapperComponent,r=n.transformState,s=r.scale,u=r.positionX,c=r.positionY;if(a){var p=(a.offsetWidth/2-u)/s,m=(a.offsetHeight/2-c)/s,f=P(n,N(n,t,e),p,m);f&&l(n,f,i,o)}}function A(n,t,e,i){var o=n.setup,a=n.wrapperComponent,r=o.limitToBounds,s=z(n.props),c=n.transformState,p=c.scale,f=c.positionX,d=c.positionY;if(a){var v=u(n,s.scale),h=m(s.positionX,s.positionY,v,r,0,0,a),g={scale:s.scale,positionX:h.x,positionY:h.y};p===s.scale&&f===s.positionX&&d===s.positionY||(null==i||i(),l(n,g,t,e))}}var D=function(n){return function(t,e,i){void 0===t&&(t=.5),void 0===e&&(e=300),void 0===i&&(i="easeOut"),W(n,1,t,e,i)}},O=function(n){return function(t,e,i){void 0===t&&(t=.5),void 0===e&&(e=300),void 0===i&&(i="easeOut"),W(n,-1,t,e,i)}},I=function(n){return function(t,e,i,o,a){void 0===o&&(o=300),void 0===a&&(a="easeOut");var r=n.transformState,s=r.positionX,u=r.positionY,c=r.scale,p=n.wrapperComponent,m=n.contentComponent;if(!n.setup.disabled&&p&&m){var f={positionX:Number.isNaN(t)?s:t,positionY:Number.isNaN(e)?u:e,scale:Number.isNaN(i)?c:i};l(n,f,o,a)}}},B=function(n){return function(t,e){void 0===t&&(t=200),void 0===e&&(e="easeOut"),A(n,t,e)}},L=function(n){return function(t,e,i){void 0===e&&(e=200),void 0===i&&(i="easeOut");var o=n.transformState,a=n.wrapperComponent,r=n.contentComponent;if(a&&r){var s=F(t||o.scale,a,r);l(n,s,e,i)}}},M=function(n){return function(t,e,i,o){void 0===i&&(i=600),void 0===o&&(o="easeOut"),r(n);var a=n.wrapperComponent,s="string"==typeof t?document.getElementById(t):t;if(a&&s&&a.contains(s)){var c=function(n,t,e){var i=n.wrapperComponent,o=n.contentComponent,a=n.transformState,r=n.setup,s=r.limitToBounds,l=r.minScale,c=r.maxScale;if(!i||!o)return a;var p,f,v,h,g,S,y,w,b=i.getBoundingClientRect(),C=t.getBoundingClientRect(),P=(p=i,f=o,v=a,h=t.getBoundingClientRect(),g=p.getBoundingClientRect(),S=f.getBoundingClientRect(),y=g.x*v.scale,w=g.y*v.scale,{x:(h.x-S.x+y)/v.scale,y:(h.y-S.y+w)/v.scale}),T=P.x,x=P.y,Y=C.width/a.scale,X=C.height/a.scale,E=i.offsetWidth/Y,z=i.offsetHeight/X,k=d(e||Math.min(E,z),l,c,0,!1),N=(b.width-Y*k)/2,W=(b.height-X*k)/2,A=m((b.left-T)*k+N,(b.top-x)*k+W,u(n,k),s,0,0,i);return{positionX:A.x,positionY:A.y,scale:k}}(n,s,e);l(n,c,i,o)}}},K=function(n){return{instance:n,zoomIn:D(n),zoomOut:O(n),setTransform:I(n),resetTransform:B(n),centerView:L(n),zoomToElement:M(n)}},R=function(n){var t={};return Object.assign(t,function(n){return{instance:n,state:n.transformState}}(n)),Object.assign(t,K(n)),t};function H(){try{return{get passive(){return!1}}}catch(n){return!1}}var Z=".".concat(E),_=function(n,t){return t.some((function(t){return n.matches("".concat(Z," ").concat(t,", ").concat(Z," .").concat(t,", ").concat(Z," ").concat(t," *, ").concat(Z," .").concat(t," *"))}))},j=function(n){n&&clearTimeout(n)},F=function(n,t,e){var i=e.offsetWidth*n,o=e.offsetHeight*n;return{scale:n,positionX:(t.offsetWidth-i)/2,positionY:(t.offsetHeight-o)/2}};function Q(n,t,e){var i=t.getBoundingClientRect(),o=0,a=0;if("clientX"in n)o=(n.clientX-i.left)/e,a=(n.clientY-i.top)/e;else{var r=n.touches[0];o=(r.clientX-i.left)/e,a=(r.clientY-i.top)/e}return Number.isNaN(o)||Number.isNaN(a),{x:o,y:a}}var q=function(n){return Math.sqrt(Math.pow(n.touches[0].pageX-n.touches[1].pageX,2)+Math.pow(n.touches[0].pageY-n.touches[1].pageY,2))},U=function(n){for(var t=0,e=0,i=0;i<2;i+=1)t+=n.touches[i].clientX,e+=n.touches[i].clientY;return{x:t/2,y:e/2}},V=function(n,t){var e=n.props.onZoomStop,o=n.setup.doubleClick.animationTime;j(n.doubleClickStopEventTimer),n.doubleClickStopEventTimer=setTimeout((function(){n.doubleClickStopEventTimer=null,i(R(n),t,e)}),o)};var G=function(n){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(n){t.props=n,p(t,t.transformState.scale),t.setup=k(n)},this.initializeWindowEvents=function(){var n,e,i=H(),o=null===(n=t.wrapperComponent)||void 0===n?void 0:n.ownerDocument,a=null==o?void 0:o.defaultView;null===(e=t.wrapperComponent)||void 0===e||e.addEventListener("wheel",t.onWheelPanning,i),null==a||a.addEventListener("mousedown",t.onPanningStart,i),null==a||a.addEventListener("mousemove",t.onPanning,i),null==a||a.addEventListener("mouseup",t.onPanningStop,i),null==o||o.addEventListener("mouseleave",t.clearPanning,i),null==a||a.addEventListener("keyup",t.setKeyUnPressed,i),null==a||a.addEventListener("keydown",t.setKeyPressed,i)},this.cleanupWindowEvents=function(){var n,e,i=H(),o=null===(n=t.wrapperComponent)||void 0===n?void 0:n.ownerDocument,a=null==o?void 0:o.defaultView;null==a||a.removeEventListener("mousedown",t.onPanningStart,i),null==a||a.removeEventListener("mousemove",t.onPanning,i),null==a||a.removeEventListener("mouseup",t.onPanningStop,i),null==o||o.removeEventListener("mouseleave",t.clearPanning,i),null==a||a.removeEventListener("keyup",t.setKeyUnPressed,i),null==a||a.removeEventListener("keydown",t.setKeyPressed,i),document.removeEventListener("mouseleave",t.clearPanning,i),r(t),null===(e=t.observer)||void 0===e||e.disconnect()},this.handleInitializeWrapperEvents=function(n){var e=H();n.addEventListener("wheel",t.onWheelZoom,e),n.addEventListener("dblclick",t.onDoubleClick,e),n.addEventListener("touchstart",t.onTouchPanningStart,e),n.addEventListener("touchmove",t.onTouchPanning,e),n.addEventListener("touchend",t.onTouchPanningStop,e)},this.handleInitialize=function(n){var e=t.setup.centerOnInit;t.applyTransformation(),t.onInitCallbacks.forEach((function(n){return n(R(t))})),e&&(t.setCenter(),t.observer=new ResizeObserver((function(){var e,i=n.offsetWidth,o=n.offsetHeight;(i>0||o>0)&&(t.onInitCallbacks.forEach((function(n){return n(R(t))})),t.setCenter(),null===(e=t.observer)||void 0===e||e.disconnect())})),setTimeout((function(){var n;null===(n=t.observer)||void 0===n||n.disconnect()}),5e3),t.observer.observe(n))},this.onWheelZoom=function(n){if(!t.setup.disabled){var o=function(n,t){var e=n.setup.wheel,i=e.disabled,o=e.wheelDisabled,a=e.touchPadDisabled,r=e.excluded,s=n.isInitialized,l=n.isPanning,u=t.target;return!(!s||l||i||!u||o&&!t.ctrlKey||a&&t.ctrlKey||_(u,r))}(t,n);o&&t.isPressingKeys(t.setup.wheel.activationKeys)&&(function(n,t){var e=n.props,o=e.onWheelStart,a=e.onZoomStart;n.wheelStopEventTimer||(r(n),i(R(n),t,o),i(R(n),t,a))}(t,n),function(n,t){var o=n.props,a=o.onWheel,r=o.onZoom,s=n.contentComponent,l=n.setup,u=n.transformState.scale,c=l.limitToBounds,m=l.centerZoomedOut,v=l.zoomAnimation,h=l.wheel,g=l.disablePadding,S=l.smooth,y=v.size,w=v.disabled,b=h.step,C=h.smoothStep;if(!s)throw new Error("Component not mounted");t.preventDefault(),t.stopPropagation();var P=function(n){var t=function(n){return n?n.deltaY<0?1:-1:0}(n);return t}(t),T=function(n,t,i,o){var a=n.transformState.scale,r=n.wrapperComponent,s=n.setup,l=s.maxScale,u=s.minScale,c=s.zoomAnimation,p=s.disablePadding,m=c.size,f=c.disabled;if(!r)throw new Error("Wrapper is not mounted");var v=!o&&!f;return d(e(a+t*i,3),u,l,m,v&&!p)}(n,P,S?C*Math.abs(t.deltaY):b,!t.ctrlKey);if(u!==T){var x=p(n,T),Y=Q(t,s,u),X=c&&(w||0===y||m||g),E=f(n,Y.x,Y.y,T,x,X),z=E.x,k=E.y;n.previousWheelEvent=t,n.setTransformState(T,z,k),i(R(n),t,a),i(R(n),t,r)}}(t,n),function(n,t){var e=n.props,o=e.onWheelStop,a=e.onZoomStop;j(n.wheelAnimationTimer),n.wheelAnimationTimer=setTimeout((function(){n.mounted&&(T(n,t.x,t.y),n.wheelAnimationTimer=null)}),100);var r=function(n,t){var e=n.previousWheelEvent,i=n.transformState.scale,o=n.setup,a=o.maxScale,r=o.minScale;return!!e&&(i<a||i>r||Math.sign(e.deltaY)!==Math.sign(t.deltaY)||e.deltaY>0&&e.deltaY<t.deltaY||e.deltaY<0&&e.deltaY>t.deltaY||Math.sign(e.deltaY)!==Math.sign(t.deltaY))}(n,t);r&&(j(n.wheelStopEventTimer),n.wheelStopEventTimer=setTimeout((function(){n.mounted&&(n.wheelStopEventTimer=null,i(R(n),t,o),i(R(n),t,a))}),160))}(t,n))}},this.onWheelPanning=function(n){var e=t.setup,i=e.disabled,o=e.wheel,a=e.panning;if(t.wrapperComponent&&t.contentComponent&&!i&&o.wheelDisabled&&!a.disabled&&a.wheelPanning&&!n.ctrlKey){n.preventDefault(),n.stopPropagation();var r=t.transformState,s=r.positionX,l=r.positionY,u=s-n.deltaX,c=l-n.deltaY,p=a.lockAxisX?s:u,m=a.lockAxisY?l:c,f=t.setup.alignmentAnimation,d=f.sizeX,v=f.sizeY,h=S(t,d),y=S(t,v);p===s&&m===l||g(t,p,m,h,y)}},this.onPanningStart=function(n){var e=t.setup.disabled,o=t.props.onPanningStart;e||v(t,n)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(0!==n.button||t.setup.panning.allowLeftClickPan)&&(1!==n.button||t.setup.panning.allowMiddleClickPan)&&(2!==n.button||t.setup.panning.allowRightClickPan)&&(n.preventDefault(),n.stopPropagation(),r(t),w(t,n),i(R(t),n,o))},this.onPanning=function(n){var e=t.setup.disabled,o=t.props.onPanning;e||h(t)&&t.isPressingKeys(t.setup.panning.activationKeys)&&(n.preventDefault(),n.stopPropagation(),C(t,n.clientX,n.clientY),i(R(t),n,o))},this.onPanningStop=function(n){var e=t.props.onPanningStop;t.isPanning&&(function(n){if(n.isPanning){var t=n.setup.panning.velocityDisabled,e=n.velocity,i=n.wrapperComponent,a=n.contentComponent;n.isPanning=!1,n.animate=!1,n.animation=null;var r=null==i?void 0:i.getBoundingClientRect(),l=null==a?void 0:a.getBoundingClientRect(),u=(null==r?void 0:r.width)||0,c=(null==r?void 0:r.height)||0,p=(null==l?void 0:l.width)||0,m=(null==l?void 0:l.height)||0,f=u<p||c<m;!t&&e&&(null==e?void 0:e.total)>.1&&f?function(n){var t=n.velocity,e=n.bounds,i=n.setup,a=n.wrapperComponent,r=function(n){var t=n.mounted,e=n.velocity,i=n.bounds,o=n.setup,a=o.disabled,r=o.velocityAnimation,s=n.transformState.scale;return!(r.disabled&&!(s>1)&&a&&!t||!e||!i)}(n);if(r&&t&&e&&a){var l=t.velocityX,u=t.velocityY,c=t.total,p=e.maxPositionX,m=e.minPositionX,f=e.maxPositionY,d=e.minPositionY,v=i.limitToBounds,h=i.alignmentAnimation,g=i.zoomAnimation,w=i.panning,b=w.lockAxisY,C=w.lockAxisX,P=g.animationType,T=h.sizeX,x=h.sizeY,Y=h.velocityAlignmentTime,X=function(n,t){var e=n.setup.velocityAnimation,i=e.equalToMove,o=e.animationTime,a=e.sensitivity;return i?o*t*a:o}(n,c),E=Math.max(X,Y),z=S(n,T),k=S(n,x),N=z*a.offsetWidth/100,W=k*a.offsetHeight/100,A=p+N,D=m-N,O=f+W,I=d-W,B=n.transformState,L=(new Date).getTime();s(n,P,E,(function(t){var e=n.transformState,i=e.scale,a=e.positionX,r=e.positionY,s=((new Date).getTime()-L)/Y,c=1-(0,o[h.animationType])(Math.min(1,s)),g=1-t,S=a+l*g,w=r+u*g,P=y(S,B.positionX,a,C,v,m,p,D,A,c),T=y(w,B.positionY,r,b,v,d,f,I,O,c);a===S&&r===w||n.setTransformState(i,P,T)}))}}(n):b(n)}}(t),i(R(t),n,e))},this.onPinchStart=function(n){var e=t.setup.disabled,o=t.props,a=o.onPinchingStart,s=o.onZoomStart;if(!e){var l=function(n,t){var e=n.setup.pinch,i=e.disabled,o=e.excluded,a=n.isInitialized,r=t.target;return!(!a||i||!r||_(r,o))}(t,n);l&&(function(n,t){var e=q(t);n.pinchStartDistance=e,n.lastDistance=e,n.pinchStartScale=n.transformState.scale,n.isPanning=!1;var i=U(t);n.pinchLastCenterX=i.x,n.pinchLastCenterY=i.y,r(n)}(t,n),r(t),i(R(t),n,a),i(R(t),n,s))}},this.onPinch=function(n){var o=t.setup.disabled,a=t.props,r=a.onPinching,s=a.onZoom;if(!o){var l=function(n){var t=n.setup.pinch.disabled,e=n.isInitialized,i=n.pinchStartDistance;return!(!e||t||!i)}(t);l&&(n.preventDefault(),n.stopPropagation(),function(n,t){var i=n.contentComponent,o=n.pinchStartDistance,a=n.wrapperComponent,r=n.transformState.scale,s=n.setup,l=s.limitToBounds,u=s.centerZoomedOut,c=s.zoomAnimation,v=s.alignmentAnimation,h=c.disabled,g=c.size;if(null!==o&&i){var y=function(n,t,i){var o=i.getBoundingClientRect(),a=n.touches,r=e(a[0].clientX-o.left,5),s=e(a[0].clientY-o.top,5);return{x:(r+e(a[1].clientX-o.left,5))/2/t,y:(s+e(a[1].clientY-o.top,5))/2/t}}(t,r,i);if(Number.isFinite(y.x)&&Number.isFinite(y.y)){var w=q(t),b=function(n,t){var i=n.pinchStartScale,o=n.pinchStartDistance,a=n.setup,r=a.maxScale,s=a.minScale,l=a.zoomAnimation,u=a.disablePadding,c=l.size,p=l.disabled;if(!i||null===o||!t)throw new Error("Pinch touches distance was not provided");return t<0?n.transformState.scale:d(e(t/o*i,2),s,r,c,!p&&!u)}(n,w),C=U(t),P=C.x-(n.pinchLastCenterX||0),T=C.y-(n.pinchLastCenterY||0);if(b!==r||0!==P||0!==T){n.pinchLastCenterX=C.x,n.pinchLastCenterY=C.y;var x=p(n,b),Y=l&&(h||0===g||u),X=f(n,y.x,y.y,b,x,Y),E=X.x,z=X.y;n.pinchMidpoint=y,n.lastDistance=w;var k=v.sizeX,N=v.sizeY,W=m(E+P,z+T,x,l,S(n,k),S(n,N),a),A=W.x,D=W.y;n.setTransformState(b,A,D)}}}}(t,n),i(R(t),n,r),i(R(t),n,s))}},this.onPinchStop=function(n){var e,o,a=t.props,r=a.onPinchingStop,s=a.onZoomStop;t.pinchStartScale&&(o=(e=t).pinchMidpoint,e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,T(e,null==o?void 0:o.x,null==o?void 0:o.y),i(R(t),n,r),i(R(t),n,s))},this.onTouchPanningStart=function(n){var e=t.setup.disabled,o=t.props.onPanningStart;if(!e&&v(t,n)&&!(t.lastTouch&&+new Date-t.lastTouch<200)){t.lastTouch=+new Date,r(t);var a=n.touches,s=1===a.length,l=2===a.length;s&&(r(t),w(t,n),i(R(t),n,o)),l&&t.onPinchStart(n)}},this.onTouchPanning=function(n){var e=t.setup.disabled,o=t.props.onPanning;if(t.isPanning&&1===n.touches.length){if(e)return;if(!h(t))return;n.preventDefault(),n.stopPropagation();var a=n.touches[0];C(t,a.clientX,a.clientY),i(R(t),n,o)}else n.touches.length>1&&t.onPinch(n)},this.onTouchPanningStop=function(n){t.onPanningStop(n),t.onPinchStop(n)},this.onDoubleClick=function(n){if(!t.setup.disabled){var e=function(n,t){var e=n.isInitialized,i=n.setup,o=n.wrapperComponent,a=i.doubleClick,r=a.disabled,s=a.excluded,l=t.target,u=null==o?void 0:o.contains(l);return!(!(e&&l&&u)||r||_(l,s))}(t,n);e&&function(n,t){var e=n.setup,o=n.doubleClickStopEventTimer,a=n.transformState,r=n.contentComponent,s=a.scale,u=n.props,c=u.onZoomStart,p=u.onZoom,m=e.doubleClick,f=m.disabled,d=m.mode,v=m.step,h=m.animationTime,g=m.animationType;if(!f&&!o){if("reset"===d)return function(n,t){var e=n.props,o=e.onZoomStart,a=e.onZoom,r=n.setup.doubleClick,s=r.animationTime,l=r.animationType;i(R(n),t,o),A(n,s,l,(function(){return i(R(n),t,a)})),V(n,t)}(n,t);if(r){var S=function(n,t){return"toggle"===n?1===t?1:-1:"zoomOut"===n?-1:1}(d,n.transformState.scale),y=N(n,S,v);if(s!==y){i(R(n),t,c);var w=Q(t,r,s),b=P(n,y,w.x,w.y);b&&(i(R(n),t,p),l(n,b,h,g),V(n,t))}}}}(t,n)}},this.clearPanning=function(n){t.isPanning&&t.onPanningStop(n)},this.setKeyPressed=function(n){t.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){t.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return!n.length||Boolean(n.find((function(n){return t.pressedKeys[n]})))},this.setTransformState=function(n,e,o){var a=t.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(e)&&!Number.isNaN(o)){n!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=n),t.transformState.positionX=e,t.transformState.positionY=o,t.applyTransformation();var r=R(t);t.onChangeCallbacks.forEach((function(n){return n(r)})),i(r,{scale:n,positionX:e,positionY:o},a)}},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var n=F(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,e,i){return t.props.customTransform?t.props.customTransform(n,e,i):function(n,t,e){return"translate(".concat(n,"px, ").concat(t,"px) scale(").concat(e,")")}(n,e,i)},this.applyTransformation=function(){if(t.mounted&&t.contentComponent){var n=t.transformState,e=n.scale,i=n.positionX,o=n.positionY,a=t.handleTransformStyles(i,o,e);t.contentComponent.style.transform=a}},this.getContext=function(){return R(t)},this.onChange=function(n){return t.onChangeCallbacks.has(n)||t.onChangeCallbacks.add(n),function(){t.onChangeCallbacks.delete(n)}},this.onInit=function(n){return t.onInitCallbacks.has(n)||t.onInitCallbacks.add(n),function(){t.onInitCallbacks.delete(n)}},this.init=function(n,e){t.cleanupWindowEvents(),t.wrapperComponent=n,t.contentComponent=e,p(t,t.transformState.scale),t.handleInitializeWrapperEvents(n),t.handleInitialize(e),t.initializeWindowEvents(),t.isInitialized=!0;var o=R(t);i(o,void 0,t.props.onInit)},this.props=n,this.setup=k(this.props),this.transformState=z(this.props)},J=n.createContext(null),$=n.forwardRef((function(e,i){var o,a,r=t.useRef(new G(e)).current,s=(o=e.children,a=K(r),"function"==typeof o?o(a):o);return t.useImperativeHandle(i,(function(){return K(r)}),[r]),t.useEffect((function(){r.update(e)}),[r,e]),n.createElement(J.Provider,{value:r},s)}));n.forwardRef((function(e,i){var o,a=t.useRef(null),r=t.useContext(J);return t.useEffect((function(){return r.onChange((function(n){a.current&&(a.current.style.transform=r.handleTransformStyles(0,0,1/n.instance.transformState.scale))}))}),[r]),n.createElement("div",x({},e,{ref:(o=[a,i],function(n){o.forEach((function(t){"function"==typeof t?t(n):null!=t&&(t.current=n)}))})}))}));!function(n,t){void 0===t&&(t={});var e=t.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===e&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}}(".transform-component-module_wrapper__SPB86 {\n  position: relative;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  overflow: hidden;\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none;\n  margin: 0;\n  padding: 0;\n}\n.transform-component-module_content__FBWxo {\n  display: flex;\n  flex-wrap: wrap;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  margin: 0;\n  padding: 0;\n  transform-origin: 0% 0%;\n}\n.transform-component-module_content__FBWxo img {\n  pointer-events: none;\n}\n");var nn=function(e){var i=e.children,o=e.wrapperClass,a=void 0===o?"":o,r=e.contentClass,s=void 0===r?"":r,l=e.wrapperStyle,u=e.contentStyle,c=e.wrapperProps,p=void 0===c?{}:c,m=e.contentProps,f=void 0===m?{}:m,d=t.useContext(J),v=d.init,h=d.cleanupWindowEvents,g=t.useRef(null),S=t.useRef(null);return t.useEffect((function(){var n=g.current,t=S.current;return null!==n&&null!==t&&v&&(null==v||v(n,t)),function(){null==h||h()}}),[]),n.createElement("div",x({},p,{ref:g,className:"".concat(E," ").concat("transform-component-module_wrapper__SPB86"," ").concat(a),style:l}),n.createElement("div",x({},f,{ref:S,className:"".concat("react-transform-component"," ").concat("transform-component-module_content__FBWxo"," ").concat(s),style:u}),i))};export{$ as T,nn as a};