import{j as e}from"./vendor-animation-CvxR4I90.js"
import{r as t}from"./vendor-react-DujXGBlD.js"
import{L as a,s}from"./index-E_1kNPBo.js"
import{P as l}from"./Pagination-DIpqNFFd.js"
import"./vendor-utils-lUhnezB_.js"
import"./vendor-icons-B9dLJkNo.js"
const r=()=>{var r
const[n,i]=t.useState([]),[o,d]=t.useState(!0),[c,m]=t.useState(null),[x,g]=t.useState("all"),[h,u]=t.useState(1),[p,b]=t.useState(null),[f,j]=t.useState(!1)
t.useState(null),t.useState(null)
t.useEffect((()=>{(async()=>{try{const{data:e,error:t}=await s.from("sertifikat").select("*").order("periode_terbit",{ascending:!1})
if(t)throw t
i(e)}catch(e){m(e.message)}finally{d(!1)}})()}),[])
const v=["all",...new Set(n.filter((e=>e.tipe)).map((e=>e.tipe)))],y="all"===x?n:n.filter((e=>e.tipe===x)),w=Math.ceil(y.length/9),N=e=>{switch(null==e?void 0:e.toLowerCase()){case"online":return"bg-blue-100 text-blue-800"
case"offline":return"bg-purple-100 text-purple-800"
default:return"bg-gray-100 text-gray-800"}}
return t.useEffect((()=>(f?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>{document.body.classList.remove("modal-open")})),[f]),o?e.jsx(a,{}):c?e.jsxs("div",{children:["Error: ",c]}):e.jsxs("div",{className:"sertifikat-container",children:[e.jsxs("div",{className:"content-wrapper",children:[e.jsx("div",{className:"absolute top-20 right-0 w-72 h-72 bg-blue-400/20 rounded-xl rotate-12"}),e.jsx("div",{className:"absolute top-40 -left-10 w-72 h-72 bg-orange-400/20 rounded-xl -rotate-12"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-60 h-60 bg-purple-400/20 rounded-xl rotate-45"}),e.jsxs("div",{className:"mx-auto max-w-7xl relative pb-8 md:pb-12",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-center mb-8 text-gray-900",children:"Sertifikat"}),e.jsx("div",{className:"filter-container sticky top-[80px] flex flex-wrap justify-center gap-2 mb-8",children:v.map((t=>e.jsx("button",{onClick:()=>g(t),className:`\n                  px-4 py-2 rounded-lg text-sm font-medium \n                  transition-all duration-300 \n                  ${x===t?"online"===t.toLowerCase()?"bg-blue-500 text-white":"offline"===t.toLowerCase()?"bg-purple-500 text-white":"bg-gray-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}\n                `,children:"all"===t?"Semua":t},t)))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-8",children:(()=>{const e=9*h,t=e-9
return y.slice(t,e)})().map((t=>e.jsx("div",{className:"sertifikat-card bg-white rounded-lg shadow-md overflow-hidden",children:e.jsxs("div",{className:"p-4 md:p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 flex-1 line-clamp-2",children:t.judul}),t.tipe&&e.jsx("span",{className:`px-2 md:px-3 py-1 text-sm rounded-full ${N(t.tipe)} shrink-0 mt-1`,children:t.tipe})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 mb-4",children:[e.jsx("p",{className:"text-gray-600",children:t.penerbit}),e.jsx("span",{className:"text-sm text-gray-500 sm:before:content-['•'] sm:before:mx-2 sm:before:text-gray-400",children:new Date(t.periode_terbit).toLocaleDateString("id-ID",{year:"numeric",month:"long"})})]}),t.keterangan&&e.jsx("p",{className:"text-gray-500 text-sm mb-4 line-clamp-2",children:t.keterangan}),e.jsxs("div",{className:"flex justify-end items-center mt-auto gap-3",children:[t.url&&e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 text-sm rounded-md bg-orange-50 text-orange-600 hover:bg-orange-100 transition-colors duration-300",children:"Lihat Sertifikat"}),e.jsx("button",{onClick:e=>{e.preventDefault(),(e=>{b(e),j(!0),document.body.style.overflow="hidden"})(t)},className:"px-4 py-2 text-sm rounded-md bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors duration-300",children:"Detail"})]})]})},t.id)))}),w>1&&e.jsx("div",{className:"mb-1",children:e.jsx(l,{currentPage:h,totalCount:y.length,pageSize:9,onPageChange:u})})]})]}),f&&p&&e.jsx("div",{className:"modal-overlay fixed inset-0 bg-black bg-opacity-50 z-[100]",children:e.jsxs("div",{className:"modal-content relative bg-white rounded-lg shadow-lg z-[101] max-w-2xl mx-auto mt-20 md:mt-24",onClick:e=>e.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full my-2"})}),e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:p.judul}),e.jsx("button",{onClick:()=>{j(!1),b(null),document.body.style.overflow="auto"},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Periode Terbit"}),e.jsx("p",{className:"text-gray-600",children:new Date(p.periode_terbit).toLocaleDateString("id-ID",{year:"numeric",month:"long"})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Penerbit"}),e.jsx("p",{className:"text-gray-600",children:p.penerbit})]}),p.keterangan&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Keterangan"}),e.jsx("p",{className:"text-gray-600 text-justify",children:p.keterangan.includes("https://")?e.jsxs(e.Fragment,{children:[p.keterangan.replace(/(https?:\/\/[^\s]+)/g,""),e.jsx("a",{href:null==(r=p.keterangan.match(/(https?:\/\/[^\s]+)/g))?void 0:r[0],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 hover:underline cursor-pointer ml-1",onClick:e=>e.stopPropagation(),children:"[lihat disini]"})]}):p.keterangan})]}),p.url&&e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-2 rounded-md transition-colors duration-200 gap-2 bg-orange-500 hover:bg-orange-600 text-white",onClick:e=>{e.stopPropagation(),window.innerWidth<=768&&(e.preventDefault(),window.open(p.url,"_blank","noopener,noreferrer"))},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1010.562-.766 4.5 4.5 0 01-1.318 1.357L14.25 7.5l.165.33a.809.809 0 01-1.086 1.085l-.604-.302a1.125 1.125 0 00-1.298.21l-.132.131c-.439.44-.439 1.152 0 1.591l.296.296c.256.257.622.374.98.314l1.17-.195c.323-.054.654.036.905.245l1.33 1.108c.32.267.46.694.358 1.1a8.7 8.7 0 01-2.288 4.04l-.723.724a1.125 1.125 0 01-1.298.21l-.153-.076a1.125 1.125 0 01-.622-1.006v-1.089c0-.298-.119-.585-.33-.796l-1.347-1.347a1.125 1.125 0 01-.21-1.298L9.75 12l-1.64-1.64a6 6 0 01-1.676-3.257l-.172-1.03z"})}),"Lihat Sertifikat"]})})]})})]})})]})}
export{r as default}
