import{c as e}from"./utils-db-I9L1Vnn6.js";import{g as t}from"./react-core-BbmA5Yt5.js";const i=()=>{if("undefined"!=typeof window){const e=document.createElement("meta");e.httpEquiv="Content-Security-Policy",e.content="\n      default-src 'self';\n      img-src 'self' data: blob: https: *.googleusercontent.com drive.google.com lh3.googleusercontent.com;\n      script-src 'self' 'unsafe-inline' 'unsafe-eval';\n      style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;\n      connect-src 'self' \n        https://*.supabase.co \n        wss://*.supabase.co \n        https://ohkcmgrjqmcarpfwcmiy.supabase.co \n        https://api.supabase.co \n        ws://localhost:* \n        http://localhost:*\n        https://api.ipify.org\n        https://ipapi.co;\n      font-src 'self' data: https://fonts.gstatic.com;\n      frame-src 'self' https: drive.google.com;\n      worker-src 'self' blob:;\n    ".replace(/\s+/g," ").trim(),document.head.appendChild(e)}},s=e("https://ohkcmgrjqmcarpfwcmiy.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9oa2NtZ3JqcW1jYXJwZndjbWl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MTE3ODEsImV4cCI6MjA0NzQ4Nzc4MX0.UvwVC0WcbprB15k3UeFEnrW8iNE9DvxwsIXtWW4aCSo",{auth:{persistSession:!0,autoRefreshToken:!0},cookies:{name:"sb-cookie",lifetime:604800,domain:window.location.hostname,path:"/",sameSite:"Strict",secure:!0}}),o=async()=>{try{const t=18e6,i=localStorage.getItem("analytics_session"),o=Date.now();if(i)try{const e=JSON.parse(i);if(o-new Date(e.first_visit).getTime()<t)return e}catch(e){localStorage.removeItem("analytics_session")}const n=document.referrer||"direct",r="direct"!==n?new URL(n).hostname:"direct",a=await(async()=>{try{const e=await fetch("https://api.ipify.org?format=json"),t=await e.json(),i=await fetch(`https://ipapi.co/${t.ip}/json/`),s=await i.json();return{ip:t.ip||"unknown",country:s.country_name||null,city:s.city||null}}catch(d){return{ip:"unknown",country:null,city:null}}})(),c=(()=>{const e=navigator.userAgent,t=e.toLowerCase();let i="Unknown";i=/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"Tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated/i.test(e)?"Mobile":"Desktop";let s="Unknown";const o={Windows:/win/i,MacOS:/mac/i,Linux:/linux/i,Android:/android/i,iOS:/(iphone|ipad|ipod)/i,"Chrome OS":/cros/i,Ubuntu:/ubuntu/i,"Firefox OS":/firefox os/i,"Windows Phone":/windows phone/i,Debian:/debian/i,Fedora:/fedora/i};for(const[r,a]of Object.entries(o))if(a.test(t)){s=r;break}let n="Unknown";return t.includes("edg/")?n="Edge":t.includes("brave")?n="Brave":t.includes("opr/")||t.includes("opera")?n="Opera":t.includes("chrome")?n="Chrome":t.includes("firefox")?n="Firefox":t.includes("safari")&&!t.includes("chrome")?n="Safari":t.includes("trident/")||t.includes("msie")?n="Internet Explorer":t.includes("vivaldi")?n="Vivaldi":t.includes("yandex")?n="Yandex":t.includes("seamonkey")?n="SeaMonkey":t.includes("chromium")&&(n="Chromium"),{deviceType:i,os:s,browser:n,userAgent:e}})(),l=(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`})(),p={session_id:`session_${o}_${Math.random().toString(36).substring(7)}`,ip_address:a.ip,country:a.country,city:a.city,first_visit:l,last_visit:l,device_type:c.deviceType,os:c.os,browser:c.browser,referrer:r,page_visits:{"tentang-saya":0,pendidikan:0,pengalaman:0,sertifikat:0,portofolio:0},social_clicks:{youtube:0,linkedin:0,github:0,whatsapp:0,instagram:0,tiktok:0}},{error:d}=await s.from("sessions").insert([p]);if(d)throw d;return localStorage.setItem("analytics_session",JSON.stringify(p)),p}catch(t){return null}},n=async()=>{try{const e=await o();if(!e)return;const t=window.location.pathname.replace("/","")||"tentang-saya",i={...e.page_visits};i[t]=(i[t]||0)+1;const{error:n}=await s.from("sessions").update({page_visits:i,last_visit:(new Date).toISOString()}).eq("session_id",e.session_id);if(n)throw n;const r={...e,page_visits:i,last_visit:(new Date).toISOString()};localStorage.setItem("analytics_session",JSON.stringify(r))}catch(e){}},r=async e=>{try{const t=await o();if(!t)return;const i={...t.social_clicks};i[e]=(i[e]||0)+1;const{error:n}=await s.from("sessions").update({social_clicks:i,last_visit:(new Date).toISOString()}).eq("session_id",t.session_id);if(n)throw n;const r={...t,social_clicks:i,last_visit:(new Date).toISOString()};localStorage.setItem("analytics_session",JSON.stringify(r))}catch(t){}};var a={exports:{}};function c(){}function l(){}l.resetWarningCache=c,a.exports=function(){function e(e,t,i,s,o,n){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==n){var r=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:l,resetWarningCache:c};return i.PropTypes=i,i}();const p=t(a.exports),d={googleDrive:{isGoogleDriveUrl:e=>e?.includes("drive.google.com")||e?.includes("googleusercontent.com"),extractFileId:e=>{if(!e)return null;let t=null;return e.includes("/file/d/")?t=e.split("/file/d/")[1]?.split("/")[0]:e.includes("id=")?t=e.split("id=")[1]?.split("&")[0]:e.includes("/d/")?t=e.split("/d/")[1]?.split("/")[0]:e.includes("lh3.googleusercontent.com/d/")&&(t=e.split("lh3.googleusercontent.com/d/")[1]?.split("=")[0]),t},getPreviewUrl:(e,t="view")=>{if(!e)return"";const i={thumbnail:[`https://lh3.googleusercontent.com/d/${e}=w500`,`https://drive.google.com/thumbnail?id=${e}&sz=w500`],preview:[`https://lh3.googleusercontent.com/d/${e}`,`https://drive.google.com/uc?export=view&id=${e}`],view:[`https://lh3.googleusercontent.com/d/${e}`,`https://drive.google.com/uc?export=view&id=${e}`]};return i[t]||i.view},getFallbackUrl:(e,t=0)=>{const i=d.googleDrive.extractFileId(e);if(!i)return null;const s=[`https://lh3.googleusercontent.com/d/${i}`,`https://drive.google.com/uc?export=view&id=${i}`,`https://drive.google.com/thumbnail?id=${i}&sz=w1000`];return t<s.length?s[t]:null}}};export{d as E,p as P,r as a,s as b,i as s,n as t};