import{j as e,T as t,b as l,m as r}from"./vendor-animation-CvxR4I90.js"
import{r as a,a as s}from"./vendor-react-DujXGBlD.js"
import{L as n,s as i}from"./index-gLqp1jaf.js"
import{A as o}from"./vendor-icons-B3j6O1HL.js"
import{g as c,f as d,a as u,C as m}from"./categories-aW9Bia0a.js"
import{P as g}from"./Pagination-DIpqNFFd.js"
import"./vendor-utils-lUhnezB_.js"
const h={googleDrive:{isGoogleDriveUrl:e=>(null==e?void 0:e.includes("drive.google.com"))||(null==e?void 0:e.includes("googleusercontent.com")),extractFileId:e=>{var t,l,r,a
if(!e)return null
let s=null
return e.includes("/file/d/")?s=null==(t=e.split("/file/d/")[1])?void 0:t.split("/")[0]:e.includes("id=")?s=null==(l=e.split("id=")[1])?void 0:l.split("&")[0]:e.includes("/d/")?s=null==(r=e.split("/d/")[1])?void 0:r.split("/")[0]:e.includes("lh3.googleusercontent.com/d/")&&(s=null==(a=e.split("lh3.googleusercontent.com/d/")[1])?void 0:a.split("=")[0]),s},getPreviewUrl:(e,t="view")=>{if(!e)return""
const l={thumbnail:[`https://lh3.googleusercontent.com/d/${e}=w500`,`https://drive.google.com/thumbnail?id=${e}&sz=w500`],preview:[`https://lh3.googleusercontent.com/d/${e}`,`https://drive.google.com/uc?export=view&id=${e}`],view:[`https://lh3.googleusercontent.com/d/${e}`,`https://drive.google.com/uc?export=view&id=${e}`]}
return l[t]||l.view},getFallbackUrl:(e,t=0)=>{const l=h.googleDrive.extractFileId(e)
if(!l)return null
const r=[`https://lh3.googleusercontent.com/d/${l}`,`https://drive.google.com/uc?export=view&id=${l}`,`https://drive.google.com/thumbnail?id=${l}&sz=w1000`]
return t<r.length?r[t]:null}}}
function x({url:r,onClose:n}){if(!r)return null
if(!n)return null
const[i,o]=a.useState(r),[c,d]=a.useState(!1),[u,m]=a.useState(!0),[g,x]=a.useState(null)
a.useEffect((()=>{r!==i&&(o(r),d(!1),m(!0))}),[r,i]),a.useEffect((()=>{const e=e=>{e.preventDefault()}
return document.addEventListener("touchmove",e,{passive:!1}),()=>{document.removeEventListener("touchmove",e)}}),[])
return s.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onTouchStart:e=>{x(e.touches[0].clientY)},onTouchEnd:e=>{x(null)},children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-[10000] w-full h-full flex items-center justify-center p-4",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),n()},className:"absolute top-4 right-4 z-[10001] bg-black/50 text-white p-2 rounded-full hover:bg-black/70","aria-label":"Tutup",children:"✕"}),e.jsx(t,{initialScale:1,minScale:.5,maxScale:4,centerOnInit:!0,wheel:{step:.1},doubleClick:{mode:"reset"},onPanning:({disabled:e})=>{},children:e.jsxs(l,{wrapperClass:"w-full h-full",contentClass:"w-full h-full flex items-center justify-center",children:[u&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent"})}),e.jsx("img",{src:i,alt:"Preview",className:"max-w-full max-h-[90vh] object-contain select-none",onError:()=>{if(!c&&(d(!0),h.googleDrive.isGoogleDriveUrl(i))){const e=h.googleDrive.extractFileId(i)
if(e){o(`https://drive.google.com/uc?export=view&id=${e}`)}}},onLoad:()=>{m(!1)},style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",opacity:u?0:1,transition:"opacity 0.3s"}})]})})]})]}),document.body)}function p({media:t,onImageClick:l}){const[r,s]=a.useState(0),[n,i]=a.useState({})
if(!(null==t?void 0:t.length))return null
const c=e=>null==e?void 0:e.toLowerCase().endsWith(".pdf"),d=(t,l)=>{var r
if(!t)return null
if(null==(r=t.url_gambar)?void 0:r.toLowerCase().endsWith(".pdf"))return e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx(o,{className:"w-8 h-8 text-red-500"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 text-center",children:"PDF"})]})
return e.jsx("img",{src:(()=>{if(t.is_external){const e=h.googleDrive.extractFileId(t.url_gambar)
if(e)return h.googleDrive.getPreviewUrl(e,"thumbnail")[0]}return t.url_gambar})(),alt:`Thumbnail ${l+1}`,className:"w-full h-full object-cover",onError:e=>{if(t.is_external){const l=h.googleDrive.extractFileId(t.url_gambar)
l&&(e.target.src=`https://drive.google.com/thumbnail?id=${l}&sz=w500`)}}})}
return e.jsxs("div",{className:"relative mb-6 touch-pan-y",children:[e.jsxs("div",{className:"relative h-[400px] bg-gray-100 rounded-lg overflow-hidden",children:[t[r]&&!n[t[r].id]?(t=>{if(!t)return null
if(c(t.url_gambar))return e.jsxs("div",{className:"relative w-full h-full cursor-pointer hover:opacity-80",onClick:()=>window.open(t.url_gambar,"_blank"),children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx(o,{className:"w-20 h-20 text-red-500"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 text-center",children:"Klik untuk membuka PDF"})]})
return e.jsx("div",{className:"relative w-full h-full",children:e.jsx("img",{src:(()=>{if(c(t.url_gambar))return"/images/pdf-thumbnail.png"
if(t.is_external){const e=h.googleDrive.extractFileId(t.url_gambar)
if(e)return h.googleDrive.getPreviewUrl(e,"preview")[0]}return t.url_gambar})(),alt:"Preview",className:"w-full h-full object-contain cursor-zoom-in",onClick:()=>(e=>{c(e.url_gambar)?window.open(e.url_gambar,"_blank"):l&&l(e)})(t),loading:"lazy",onError:e=>{if(t.is_external){h.googleDrive.extractFileId(t.url_gambar)&&(e.target.src=h.googleDrive.getFallbackUrl(t.url_gambar,0))}i((e=>({...e,[t.id]:!0})))}})})})(t[r]):e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-red-500",children:"Media tidak tersedia"})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{s((e=>0===e?t.length-1:e-1))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:"←"}),e.jsx("button",{onClick:()=>{s((e=>e===t.length-1?0:e+1))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:"→"})]})]}),t.length>1&&e.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2",children:t.map(((t,l)=>e.jsx("button",{onClick:()=>s(l),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors "+(r===l?"border-emerald-500":"border-transparent"),children:d(t,l)},l)))})]})}function v({project:t,onClose:l}){var r,n,i
const[o,u]=a.useState(window.innerWidth<=768),[m,g]=a.useState(null),[v,f]=a.useState(!1),[b,j]=a.useState({}),[w,y]=a.useState(!0),N=function(e){const[t,l]=a.useState(null),[r,s]=a.useState(null)
return{onTouchStart:a.useCallback((e=>{s(null),l({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})}),[]),onTouchMove:a.useCallback((e=>{s({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})}),[]),onTouchEnd:a.useCallback((()=>{if(!t||!r)return
const a=t.y-r.y,n=t.x-r.x,i=a>50
Math.abs(a)>Math.abs(n)&&i&&e&&e(),l(null),s(null)}),[t,r,e])}}(l),[k,C]=a.useState(null),[S,_]=a.useState(null)
a.useEffect((()=>{const e=()=>{u(window.innerWidth<=768)}
return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),a.useEffect((()=>{(async()=>{try{y(!0)
const e=await d()
j(e)}catch(e){}finally{y(!1)}})()}),[]),a.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"})),[])
const P=v&&m&&m.displayUrl
return s.createPortal(e.jsxs("div",{className:"modal-overlay fixed inset-0 bg-black/50 \r\n                 flex items-center justify-center p-4 touch-manipulation",style:{zIndex:"var(--z-modal)"},onClick:e=>{e.target===e.currentTarget&&l()},...o?N:{},onTouchStart:e=>{C(e.touches[0].clientY)},onTouchMove:e=>{_(e.touches[0].clientY)},onTouchEnd:()=>{if(!k||!S)return
const e=k-S
Math.abs(e)>100&&(C(null),_(null))},children:[e.jsxs("div",{className:"modal-content bg-white rounded-lg w-full max-w-4xl \r\n                   max-h-[90vh] overflow-y-auto relative overscroll-contain \r\n                   touch-pan-y",onClick:e=>{e.stopPropagation()},style:{WebkitOverflowScrolling:"touch",msOverflowStyle:"-ms-autohiding-scrollbar"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full my-2"})}),e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center",style:{zIndex:10001,backgroundColor:"white"},children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.judul}),e.jsx("button",{onClick:l,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),e.jsxs("div",{className:"p-4",children:[(null==(r=t.images)?void 0:r.length)>0&&e.jsx("div",{className:"mb-6",children:e.jsx(p,{media:t.images.map((e=>({...e,url_gambar:e.url_gambar,thumbnail_url:e.is_external?h.googleDrive.getPreviewUrl(h.googleDrive.extractFileId(e.url_gambar),"thumbnail")[0]:e.url_gambar}))),onImageClick:(e,t)=>{if(null==t||t.stopPropagation(),null==e?void 0:e.url_gambar)try{let t=""
if(e.is_external){const l=h.googleDrive.extractFileId(e.url_gambar)
if(l){t=h.googleDrive.getPreviewUrl(l,"preview")[0]}}else t=e.url_gambar
if(!t)return
g({...e,displayUrl:t}),f(!0)}catch(l){}}})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Deskripsi"}),e.jsx("p",{className:"text-gray-600",children:t.deskripsi})]}),(null==(n=t.poin)?void 0:n.length)>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Highlights"}),e.jsx("ul",{className:"list-disc list-inside space-y-2",children:t.poin.map(((t,l)=>e.jsx("li",{className:"text-gray-600",children:t},l)))})]}),(null==(i=t.tools)?void 0:i.length)>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tools yang digunakan"}),e.jsx("div",{className:"flex flex-wrap gap-2",onClick:e=>e.stopPropagation(),children:w?e.jsx("span",{className:"text-gray-500",children:"Loading tools..."}):t.tools.map(((t,l)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm border",style:c(t),onClick:e=>e.stopPropagation(),children:t},l)))})]}),t.tautan&&e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:t.tautan,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-2 rounded-md transition-colors duration-200 gap-2 bg-orange-500 hover:bg-orange-600 text-white",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:e.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM6.262 6.072a8.25 8.25 0 1010.562-.766 4.5 4.5 0 01-1.318 1.357L14.25 7.5l.165.33a.809.809 0 01-1.086 1.085l-.604-.302a1.125 1.125 0 00-1.298.21l-.132.131c-.439.44-.439 1.152 0 1.591l.296.296c.256.257.622.374.98.314l1.17-.195c.323-.054.654.036.905.245l1.33 1.108c.32.267.46.694.358 1.1a8.7 8.7 0 01-2.288 4.04l-.723.724a1.125 1.125 0 01-1.298.21l-.153-.076a1.125 1.125 0 01-.622-1.006v-1.089c0-.298-.119-.585-.33-.796l-1.347-1.347a1.125 1.125 0 01-.21-1.298L9.75 12l-1.64-1.64a6 6 0 01-1.676-3.257l-.172-1.03z"})}),"Live Demo"]})})]})]}),P&&e.jsx(e.Fragment,{children:e.jsx(x,{url:m.displayUrl,onClose:()=>{f(!1),g(null)}})})]}),document.body)}function f(){return e.jsxs(r.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-8 mt-8",children:[e.jsx("div",{className:"w-64 h-64 mb-6",children:e.jsx("img",{src:"/startup-animation.svg",alt:"Startup Animation",className:"animated w-full h-full"})}),e.jsx(r.h3,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},className:"text-2xl font-bold text-gray-800 mb-3 text-center",children:"Sabar ya! 😊"}),e.jsx(r.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-gray-600 text-center max-w-md",children:"Proyek-proyek keren sedang dalam proses pengumpulan. Nantikan update terbaru dari saya!"}),e.jsxs(r.div,{className:"flex gap-2 mt-6",animate:{scale:[1,.9,1]},transition:{duration:1.5,repeat:1/0},children:[e.jsx("span",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"w-3 h-3 bg-orange-400 rounded-full"}),e.jsx("span",{className:"w-3 h-3 bg-orange-300 rounded-full"})]})]})}function b(){const[t,l]=a.useState([]),[r,s]=a.useState(!0),[x,p]=a.useState(null),[b,j]=a.useState(null),[w,y]=a.useState(!1)
a.useState(!1)
const[N,k]=a.useState({}),{activeFilter:C,setActiveFilter:S,filteredItems:_,getCategoryStyle:P,categories:D,isTransitioning:z}=u(t),{currentPage:F,setCurrentPage:E,currentItems:T,pageSize:I}=((e,t=8)=>{const[l,r]=a.useState(1),[s,n]=a.useState(!1),i=a.useCallback((e=>{e!==l&&(n(!0),setTimeout((()=>{r(e),requestAnimationFrame((()=>{requestAnimationFrame((()=>{n(!1)}))}))}),150))}),[l]),o=a.useMemo((()=>{const r=(l-1)*t,a=r+t
return e.slice(r,a)}),[l,e,t])
return{currentPage:l,setCurrentPage:i,currentItems:o,isTransitioning:s,pageSize:t}})(_)
a.useEffect((()=>{(async()=>{try{const[e,t]=await Promise.all([i.from("portofolios").select("\n              *,\n              images(\n                id, \n                url_gambar, \n                tipe,\n                is_external,\n                url_asli\n              )\n            ").order("waktu_publish",{ascending:!1}),d()])
if(e.error)throw e.error
const r=e.data.map((e=>e))
l(r),k(t)}catch(e){p("Terjadi kesalahan saat mengambil data")}finally{s(!1)}})()}),[]),a.useEffect((()=>{const e=()=>{y(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768)}
return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[])
const $=e=>{var t
if(!(null==(t=null==e?void 0:e.images)?void 0:t.length))return null
const l=e.images.find((e=>"thumbnail"===e.tipe))||e.images[0]
return null==l?void 0:l.url_gambar},L=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),j(e),document.body.style.overflow="hidden"}
return r?e.jsx(n,{}):x?e.jsx("div",{className:"text-center py-8 text-red-500",children:x}):e.jsx("div",{className:"portofolio-container min-h-screen px-4 py-8 pt-24 bg-gradient-to-br relative",children:e.jsxs("div",{className:"mx-auto max-w-7xl relative z-10",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-center mb-8 text-gray-900",children:"Portofolio"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-10",children:D.map((t=>e.jsx("button",{onClick:()=>S(t),className:`\n                px-4 py-2 rounded-lg text-sm font-medium \n                transition-all duration-300 \n                border hover:shadow-md\n                ${C===t?"border-transparent":"border-gray-300 hover:border-gray-400"}\n              `,style:{...P(t),transform:C===t?"scale(1.05)":"scale(1)",borderWidth:"1px"},children:t},t)))}),0===_.length?e.jsx(f,{}):e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 ${z?"opacity-50":"opacity-100"} transition-opacity duration-150`,children:T.map((t=>{var l,r,a,s,n,i
return e.jsxs("div",{className:"project-card group bg-white/70 backdrop-blur-sm rounded-lg shadow-md overflow-hidden",style:{borderColor:"var(--color-primary)",borderWidth:"1px"},children:[e.jsx("div",{className:"thumbnail-container cursor-pointer relative group",onClick:e=>L(t,e),children:(null==(l=t.images)?void 0:l.length)>0?e.jsx(e.Fragment,{children:(i=t.images[0].url_gambar,(null==i?void 0:i.toLowerCase().endsWith(".pdf"))?e.jsxs("div",{className:"w-full h-48 bg-gray-100 flex flex-col items-center justify-center",children:[e.jsx(o,{className:"w-16 h-16 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-600 mt-2",children:"PDF Document"})]}):e.jsx("img",{src:$(t),alt:t.judul,className:"w-full h-48 object-cover transition-all duration-300 group-hover:opacity-90",loading:"lazy",onError:e=>{const l=t.images[0]
if((null==l?void 0:l.is_external)&&(null==l?void 0:l.url_gambar)){const t=h.googleDrive.extractFileId(l.url_gambar)
t&&(e.target.src=`https://drive.google.com/thumbnail?id=${t}&sz=w500`)}}}))}):e.jsx("div",{className:"w-full h-48 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"🖼️"})})}),e.jsxs("div",{className:"project-content p-4 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 line-clamp-2",children:t.judul}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-5 text-sm leading-relaxed",children:t.deskripsi}),e.jsx("div",{className:"tools-container mt-auto",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[null==(r=t.tools)?void 0:r.slice(0,4).map(((t,l)=>e.jsx("span",{className:"tool-tag",style:c(t),children:t},l))),(null==(a=t.tools)?void 0:a.length)>4&&e.jsxs("button",{onClick:e=>((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),j(e),document.body.style.overflow="hidden"})(t,e),className:"tool-tag-more",style:{backgroundColor:`${null==(s=m[t.kategori])?void 0:s.bg}20`||"#f8f9fa",color:(null==(n=m[t.kategori])?void 0:n.bg)||"#374151"},children:["+",t.tools.length-4," more"]})]})}),e.jsx("div",{className:"project-buttons mt-auto",children:e.jsx("div",{className:"flex gap-2 justify-end",children:e.jsx("button",{onClick:e=>L(t,e),className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors",children:"Detail"})})})]})]},t.id)}))}),e.jsx(g,{currentPage:F,totalCount:_.length,pageSize:I,onPageChange:E}),b&&e.jsx(v,{project:b,onClose:()=>{j(null)}})]})})}export{b as default}
