import{j as e,m as t}from"./animation-core-BZFp2DKZ.js";import{a as r,r as a}from"./react-core-BbmA5Yt5.js";import{E as l,b as s}from"./utils-CUgZd7Ef.js";import{L as n}from"./index-sXisbsum.js";import{T as o,a as i}from"./animation-zoom-KsdYKCRB.js";import{a as c,b as d,P as u}from"./index-DiFEj8Rz.js";import{g as m,f as g,a as h,C as x}from"./categories-BVne4L0z.js";import"./utils-db-I9L1Vnn6.js";import"./react-dom-Ceep4mT8.js";import"./react-router-BF67XFk8.js";function p({media:t,onImageClick:a}){const[s,n]=r.useState(0),[o,i]=r.useState({});if(!t?.length)return null;const d=e=>e?.toLowerCase().endsWith(".pdf"),u=(t,r)=>t?t.url_gambar?.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx(c,{className:"w-8 h-8 text-red-500"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white text-xs p-1 text-center",children:"PDF"})]}):e.jsx("img",{src:(()=>{if(t.is_external){const e=l.googleDrive.extractFileId(t.url_gambar);if(e)return l.googleDrive.getPreviewUrl(e,"thumbnail")[0]}return t.url_gambar})(),alt:`Thumbnail ${r+1}`,className:"w-full h-full object-cover",onError:e=>{if(t.is_external){const r=l.googleDrive.extractFileId(t.url_gambar);r&&(e.target.src=`https://drive.google.com/thumbnail?id=${r}&sz=w500`)}}}):null;return e.jsxs("div",{className:"relative mb-6 touch-pan-y",children:[e.jsxs("div",{className:"relative h-[400px] bg-gray-100 rounded-lg overflow-hidden",children:[t[s]&&!o[t[s].id]?(m=t[s],m?d(m.url_gambar)?e.jsxs("div",{className:"relative w-full h-full cursor-pointer hover:opacity-80",onClick:()=>window.open(m.url_gambar,"_blank"),children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:e.jsx(c,{className:"w-20 h-20 text-red-500"})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2 text-center",children:"Klik untuk membuka PDF"})]}):e.jsx("div",{className:"relative w-full h-full",children:e.jsx("img",{src:(()=>{if(d(m.url_gambar))return"/images/pdf-thumbnail.png";if(m.is_external){const e=l.googleDrive.extractFileId(m.url_gambar);if(e)return l.googleDrive.getPreviewUrl(e,"preview")[0]}return m.url_gambar})(),alt:"Preview",className:"w-full h-full object-contain cursor-zoom-in",onClick:()=>(e=>{d(e.url_gambar)?window.open(e.url_gambar,"_blank"):a&&a(e)})(m),loading:"lazy",onError:e=>{m.is_external&&l.googleDrive.extractFileId(m.url_gambar)&&(e.target.src=l.googleDrive.getFallbackUrl(m.url_gambar,0)),i((e=>({...e,[m.id]:!0})))}})}):null):e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-red-500",children:"Media tidak tersedia"})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{n((e=>0===e?t.length-1:e-1))},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:"â†"}),e.jsx("button",{onClick:()=>{n((e=>e===t.length-1?0:e+1))},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:"â†’"})]})]}),t.length>1&&e.jsx("div",{className:"flex gap-2 mt-4 overflow-x-auto pb-2",children:t.map(((t,r)=>e.jsx("button",{onClick:()=>n(r),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors "+(s===r?"border-emerald-500":"border-transparent"),children:u(t,r)},r)))})]});var m}function b({url:t,onClose:s}){if(!t)return null;if(!s)return null;const[n,c]=r.useState(t),[d,u]=r.useState(!1),[m,g]=r.useState(!0),[h,x]=r.useState(null);return r.useEffect((()=>{t!==n&&(c(t),u(!1),g(!0))}),[t,n]),r.useEffect((()=>{const e=e=>{e.preventDefault()};return document.addEventListener("touchmove",e,{passive:!1}),()=>{document.removeEventListener("touchmove",e)}}),[]),a.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",onTouchStart:e=>{x(e.touches[0].clientY)},onTouchEnd:e=>{x(null)},children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-[10000] w-full h-full flex items-center justify-center p-4",onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),s()},className:"absolute top-4 right-4 z-[10001] bg-black/50 text-white p-2 rounded-full hover:bg-black/70","aria-label":"Tutup",children:"âœ•"}),e.jsx(o,{initialScale:1,minScale:.5,maxScale:4,centerOnInit:!0,wheel:{step:.1},doubleClick:{mode:"reset"},onPanning:({disabled:e})=>{},children:e.jsxs(i,{wrapperClass:"w-full h-full",contentClass:"w-full h-full flex items-center justify-center",children:[m&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-white border-t-transparent"})}),e.jsx("img",{src:n,alt:"Preview",className:"max-w-full max-h-[90vh] object-contain select-none",onError:()=>{if(!d&&(u(!0),l.googleDrive.isGoogleDriveUrl(n))){const e=l.googleDrive.extractFileId(n);e&&c(`https://drive.google.com/uc?export=view&id=${e}`)}},onLoad:()=>{g(!1)},style:{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",opacity:m?0:1,transition:"opacity 0.3s"}})]})})]})]}),document.body)}const f=({url:t,title:a})=>{const[l,s]=r.useState(""),[n,o]=r.useState(!1),[i,d]=r.useState("");return r.useEffect((()=>{if(t&&(d((e=>{try{if(e.includes("drive.google.com")){const t=e.match(/\/d\/(.*?)\/|id=(.*?)(&|$)/),r=t?t[1]||t[2]:null;if(r)return s(`https://drive.google.com/thumbnail?id=${r}&sz=w400`),"Google Drive Document"}return decodeURIComponent(e.split("/").pop()).replace(/^\d+-/,"").replace(/-/g," ").replace(".pdf","").toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")}catch(t){return"Document"}})(t)),!t.includes("drive.google.com"))){const e=t.match(/[-\w]{25,}(?!.*[-\w]{25,})/)?.[0];e&&s(`https://drive.google.com/thumbnail?id=${e}&sz=w400`)}}),[t]),e.jsx("div",{className:"pdf-preview p-4 border rounded-lg bg-white shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-24 h-24 flex-shrink-0 rounded-lg overflow-hidden bg-gray-100",children:!n&&l?e.jsx("img",{src:l,alt:i,className:"w-full h-full object-cover",loading:"lazy",onError:()=>o(!0)}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(c,{className:"w-12 h-12 text-red-500"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 line-clamp-2",children:i}),e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"mt-3 inline-flex items-center gap-2 px-3 py-1 text-sm rounded-full text-blue-500 border border-blue-500 bg-white hover:bg-blue-50 transition-colors duration-300",children:[e.jsx(c,{className:"w-4 h-4"}),"Lihat PDF"]})]})]})})};function v({project:t,onClose:s}){const[n,o]=r.useState(window.innerWidth<=768),[i,c]=r.useState(null),[u,h]=r.useState(!1),[x,v]=r.useState({}),[j,y]=r.useState(!0),w=function(e){const[t,a]=r.useState(null),[l,s]=r.useState(null);return{onTouchStart:r.useCallback((e=>{s(null),a({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})}),[]),onTouchMove:r.useCallback((e=>{s({x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY})}),[]),onTouchEnd:r.useCallback((()=>{if(!t||!l)return;const r=t.y-l.y,n=t.x-l.x,o=r>50;Math.abs(r)>Math.abs(n)&&o&&e&&e(),a(null),s(null)}),[t,l,e])}}(s),[N,k]=r.useState(null),[C,_]=r.useState(null);r.useEffect((()=>{const e=()=>{o(window.innerWidth<=768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),r.useEffect((()=>{(async()=>{try{y(!0);const e=await g();v(e)}catch(e){}finally{y(!1)}})()}),[]),r.useEffect((()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"})),[]);const S=(e,t)=>{if(t?.stopPropagation(),e?.url_gambar)try{let t="";if(e.is_external){const r=l.googleDrive.extractFileId(e.url_gambar);r&&(t=l.googleDrive.getPreviewUrl(r,"preview")[0])}else t=e.url_gambar;if(!t)return;c({...e,displayUrl:t}),h(!0)}catch(r){}},P=u&&i&&i.displayUrl,D=e=>e?.toLowerCase().endsWith(".pdf");return a.createPortal(e.jsxs("div",{className:"modal-overlay fixed inset-0 bg-black/50 \r\n                 flex items-center justify-center p-4 touch-manipulation",style:{zIndex:"var(--z-modal)"},onClick:e=>{e.target===e.currentTarget&&s()},...n?w:{},onTouchStart:e=>{k(e.touches[0].clientY)},onTouchMove:e=>{_(e.touches[0].clientY)},onTouchEnd:()=>{if(!N||!C)return;const e=N-C;Math.abs(e)>100&&(k(null),_(null))},children:[e.jsxs("div",{className:"modal-content bg-white rounded-lg w-full max-w-4xl \r\n                   max-h-[90vh] overflow-y-auto relative overscroll-contain \r\n                   touch-pan-y",onClick:e=>{e.stopPropagation()},style:{WebkitOverflowScrolling:"touch",msOverflowStyle:"-ms-autohiding-scrollbar"},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full my-2"})}),e.jsxs("div",{className:"sticky top-0 bg-white p-4 border-b flex justify-between items-center",style:{zIndex:10001,backgroundColor:"white"},children:[e.jsx("h2",{className:"text-2xl font-bold",children:t.judul}),e.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"âœ•"})]}),e.jsxs("div",{className:"p-4",children:[(()=>{if(!t.images?.length)return null;const r=t.images.filter((e=>D(e.url_gambar))),a=t.images.filter((e=>!D(e.url_gambar)));return e.jsxs("div",{className:"mb-6",children:[r.length>0&&e.jsx("div",{className:"space-y-4 mb-6",children:r.map(((r,a)=>e.jsx(f,{url:r.url_gambar,title:`${t.judul} - Document ${a+1}`},r.id||a)))}),a.length>0&&e.jsx(p,{media:a.map((e=>({...e,url_gambar:e.url_gambar,thumbnail_url:e.is_external?l.googleDrive.getPreviewUrl(l.googleDrive.extractFileId(e.url_gambar),"thumbnail")[0]:e.url_gambar}))),onImageClick:S})]})})(),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Deskripsi"}),e.jsx("p",{className:"text-gray-600",children:t.deskripsi})]}),t.poin?.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Highlights"}),e.jsx("ul",{className:"list-disc list-inside space-y-2",children:t.poin.map(((t,r)=>e.jsx("li",{className:"text-gray-600",children:t},r)))})]}),t.tools?.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Tools yang digunakan"}),e.jsx("div",{className:"flex flex-wrap gap-2",onClick:e=>e.stopPropagation(),children:j?e.jsx("span",{className:"text-gray-500",children:"Loading tools..."}):t.tools.map(((t,r)=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm border",style:m(),onClick:e=>e.stopPropagation(),children:t},r)))})]}),t.tautan&&e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("a",{href:t.tautan,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 text-sm rounded-full text-blue-500 border border-blue-500 bg-white hover:bg-blue-50 transition-colors duration-300",onClick:e=>{e.stopPropagation(),window.innerWidth<=768&&(e.preventDefault(),window.open(t.tautan,"_blank","noopener,noreferrer"))},children:[e.jsx(d,{className:"w-4 h-4"}),"Live Demo"]})})]})]}),P&&e.jsx(e.Fragment,{children:e.jsx(b,{url:i.displayUrl,onClose:()=>{h(!1),c(null)}})})]}),document.body)}function j(){return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center p-8 mt-8",children:[e.jsx("div",{className:"w-64 h-64 mb-6",children:e.jsx("img",{src:"/startup-animation.svg",alt:"Startup Animation",className:"animated w-full h-full"})}),e.jsx(t.h3,{animate:{scale:[1,1.05,1]},transition:{duration:2,repeat:1/0},className:"text-2xl font-bold text-gray-800 mb-3 text-center",children:"Sabar ya! ðŸ˜Š"}),e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-gray-600 text-center max-w-md",children:"Proyek-proyek keren sedang dalam proses pengumpulan. Nantikan update terbaru dari saya!"}),e.jsxs(t.div,{className:"flex gap-2 mt-6",animate:{scale:[1,.9,1]},transition:{duration:1.5,repeat:1/0},children:[e.jsx("span",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"w-3 h-3 bg-orange-400 rounded-full"}),e.jsx("span",{className:"w-3 h-3 bg-orange-300 rounded-full"})]})]})}function y(){const[t,a]=r.useState([]),[o,i]=r.useState(!0),[p,b]=r.useState(null),[f,y]=r.useState(null),[w,N]=r.useState(!1);r.useState(!1);const[k,C]=r.useState({}),{activeFilter:_,setActiveFilter:S,filteredItems:P,getCategoryStyle:D,categories:T,isTransitioning:E}=h(t),{currentPage:z,setCurrentPage:F,currentItems:I,pageSize:L}=((e,t=8)=>{const[a,l]=r.useState(1),[s,n]=r.useState(!1),o=r.useCallback((e=>{e!==a&&(n(!0),setTimeout((()=>{l(e),requestAnimationFrame((()=>{requestAnimationFrame((()=>{n(!1)}))}))}),150))}),[a]),i=r.useMemo((()=>{const r=(a-1)*t,l=r+t;return e.slice(r,l)}),[a,e,t]);return{currentPage:a,setCurrentPage:o,currentItems:i,isTransitioning:s,pageSize:t}})(P);r.useEffect((()=>{(async()=>{try{const[e,t]=await Promise.all([s.from("portofolios").select("\n              *,\n              images(\n                id, \n                url_gambar, \n                tipe,\n                is_external,\n                url_asli\n              )\n            ").order("waktu_publish",{ascending:!1}),g()]);if(e.error)throw e.error;const r=e.data.map((e=>e));a(r),C(t)}catch(e){b("Terjadi kesalahan saat mengambil data")}finally{i(!1)}})()}),[]),r.useEffect((()=>{const e=()=>{N(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const W=e=>{if(!e?.images?.length)return null;const t=e.images.find((e=>"thumbnail"===e.tipe))||e.images[0];return t?.url_gambar},M=(e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),y(e),document.body.style.overflow="hidden"};return o?e.jsx(n,{}):p?e.jsx("div",{className:"text-center py-8 text-red-500",children:p}):e.jsx("div",{className:"portofolio-container min-h-screen px-4 py-8 pt-24 bg-gradient-to-br relative",children:e.jsxs("div",{className:"mx-auto max-w-7xl relative z-10",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-center mb-8 text-gray-900",children:"Portofolio"}),e.jsx("div",{className:"flex overflow-hidden flex-wrap justify-center gap-2 mb-10",children:T.map((t=>e.jsx("button",{onClick:()=>S(t),className:`\n                px-4 py-2 rounded-lg text-sm font-medium \n                transition-all duration-300 \n                border hover:shadow-md\n                ${_===t?"border-transparent":"border-gray-300 hover:border-gray-400"}\n              `,style:{...D(t),transform:_===t?"scale(1.05)":"scale(1)",borderWidth:"1px"},children:t},t)))}),0===P.length?e.jsx(j,{}):e.jsx("div",{className:`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 ${E?"opacity-50":"opacity-100"} transition-opacity duration-150`,children:I.map((t=>{return e.jsxs("div",{className:"project-card bg-white/70 backdrop-blur-sm rounded-lg shadow-md overflow-hidden",style:{borderColor:"var(--color-primary)",borderWidth:"1px"},children:[e.jsx("div",{className:"thumbnail-container cursor-pointer relative group",onClick:e=>M(t,e),children:t.images?.length>0?e.jsx(e.Fragment,{children:(r=t.images[0].url_gambar,r?.toLowerCase().endsWith(".pdf")?e.jsxs("div",{className:"w-full h-48 bg-gray-100 flex flex-col items-center justify-center",children:[e.jsx(c,{className:"w-16 h-16 text-red-500"}),e.jsx("span",{className:"text-sm text-gray-600 mt-2",children:"PDF Document"})]}):e.jsx("img",{src:W(t),alt:t.judul,className:"w-full h-48 object-cover transition-all duration-300 group-hover:opacity-90",loading:"lazy",onError:e=>{const r=t.images[0];if(r?.is_external&&r?.url_gambar){const t=l.googleDrive.extractFileId(r.url_gambar);t&&(e.target.src=`https://drive.google.com/thumbnail?id=${t}&sz=w500`)}}}))}):e.jsx("div",{className:"w-full h-48 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ–¼ï¸"})})}),e.jsxs("div",{className:"project-content p-4 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold mb-2 line-clamp-2",children:t.judul}),e.jsx("p",{className:"text-gray-600 mb-3 line-clamp-5 text-sm leading-relaxed",children:t.deskripsi}),e.jsx("div",{className:"tools-container mt-auto",children:e.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[t.tools?.slice(0,4).map(((t,r)=>e.jsx("span",{className:"tool-tag",style:m(),children:t},r))),t.tools?.length>4&&e.jsxs("button",{onClick:e=>((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),y(e),document.body.style.overflow="hidden"})(t,e),className:"tool-tag-more",style:{backgroundColor:`${x[t.kategori]?.bg}20`||"#f8f9fa",color:x[t.kategori]?.bg||"#374151"},children:["+",t.tools.length-4," more"]})]})}),e.jsx("div",{className:"project-buttons mt-auto",children:e.jsxs("div",{className:"flex gap-2 justify-end",children:[t.tautan&&e.jsxs("a",{href:t.tautan,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-3 py-1 text-sm rounded-full transition-colors duration-300",style:{color:"var(--color-primary)",borderColor:"var(--color-primary)",borderWidth:"1px",backgroundColor:"white"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--color-primary)",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.color="var(--color-primary)"},children:[e.jsx(d,{className:"w-4 h-4"}),"Live Demo"]}),e.jsx("button",{onClick:e=>M(t,e),className:"px-3 py-1 text-sm rounded-full transition-colors duration-300",style:{color:"var(--color-primary)",borderColor:"var(--color-primary)",borderWidth:"1px",backgroundColor:"white"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="var(--color-primary)",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.color="var(--color-primary)"},children:"Detail"})]})})]})]},t.id);var r}))}),e.jsx(u,{currentPage:z,totalCount:P.length,pageSize:L,onPageChange:F}),f&&e.jsx(v,{project:f,onClose:()=>{y(null)}})]})})}export{y as default};